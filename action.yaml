name: "Make README.md"
description: "Makes README.md on push or pull request events or when manually triggered"
runs:
  using: "composite"
  steps:
    - name: Install Python
      uses: actions/setup-python@v4
      with:
        python-version: "3.8"
    - name: Install dependencies
      run: |
        pip install glob2
        pip install tqdm
        pip install nbformat
      shell: bash
    - name: Make README.md
      working-directory: ./notebook_examples
      id: make_readme
      run: python make_readme.py
      shell: bash
    - name: Commit README.md
      run: |
        git config user.name 'github-actions[bot]'
        git config user.email 'github-actions[bot]@users.noreply.github.com'
        git add notebook_examples/README.md
        git commit -m "committing README.md with GitHub actions"
        git push
      shell: bash
